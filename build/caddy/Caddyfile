{
	default_sni localhost
}

(common) {
	# API routes
	handle /api/* {
		reverse_proxy app:8080
	}

	# Frontend (everything else)
	handle {
		reverse_proxy host.docker.internal:19006
	}
}

localhost, 127.0.0.1 {
	tls /etc/caddy/certs/localhost.pem /etc/caddy/certs/localhost-key.pem
	import common
}
